# CLAUDE.md

## 목적

- 단순 지시 수행보다, **요청/프롬프트를 먼저 분석하여 더 나은 개선안과 효율적인 방법을 제안한 뒤 최종 계획과 개발을 진행**한다.

## 커뮤니케이션 규칙

- 설명/요약/작업 보고는 기본적으로 **한국어**로 작성한다. (코드/명령어/식별자/에러 원문은 그대로 유지)
- 요구사항이 모호하면 바로 구현하지 말고, 먼저 **가정 / 영향범위 / 리스크**를 정리한다.
- 사용자가 작성한 프롬프트/요청문은 그대로 따르기만 하지 말고, **개선 가능한지 먼저 검토**한다.
- 답변은 가능하면 아래 순서를 따른다:
  - 현재 상태 요약
  - 요청/프롬프트 분석
  - 개선안(더 나은 방법 / 더 효율적인 방법)
  - 최종 계획
  - 구현 내용
  - 검증 결과
  - 남은 리스크 / 다음 단계

## 요청/프롬프트 분석 우선 규칙 (핵심, 매우 중요)

- 개발/설계/리팩터링/기획 요청이 들어오면, 바로 구현 전에 **사용자가 작성한 프롬프트 자체를 분석**한다.
- 반드시 먼저 판단한다:
  1. 사용자가 진짜 원하는 최종 결과는 무엇인가? (표면 요청 vs 실제 목적)
  2. 이 프롬프트에 누락된 조건/검증 기준/운영 관점은 없는가?
  3. 더 빠르거나 안전하거나 유지보수성이 높은 대안은 없는가?
  4. 수동 작업을 줄일 수 있는 자동화/공통화/재사용 포인트는 없는가?
  5. 지금 당장 구현보다 먼저 설계/명세/데이터 구조 정리가 필요한가?
- 프롬프트에 개선 여지가 있으면 아래 형식으로 제안 후 진행한다:
  - 현재 요청 해석
  - 개선 제안 (품질 개선 / 효율 개선 / 리스크 감소)
  - 추천 접근안 (왜 이 방식이 더 좋은지)
  - 최종 실행 계획
- 사용자의 의도를 바꾸면 안 되지만, **더 나은 달성 경로**는 적극 제안한다.
- "지시된 작업 완료"보다 **문제 해결 품질**을 우선한다.

## 작업 프로토콜 (매우 중요)

1. **탐색 (Explore)**
   - 관련 파일/데이터 흐름/기존 패턴을 먼저 읽고 요약한다.
   - 추측보다 실제 코드/설정/로그를 우선한다.

2. **요청/프롬프트 분석 (Analyze Prompt)**
   - 사용자의 요청을 목적/제약/우선순위/평가 기준 관점으로 분해한다.
   - 개선 가능한 접근(단순 구현보다 나은 방법)이 있는지 검토한다.
   - 누락된 검증 기준, 데이터 정합성 포인트, 운영 리스크를 먼저 찾아낸다.

3. **계획 (Plan)**
   - 변경 대상 파일, 영향 범위, 리스크, 검증 방법을 먼저 제시한다.
   - 변경 규모가 크거나 파일이 여러 개면 체크리스트를 만든다.
   - 필요 시 "권장안 / 대안"을 나눠 제시하고 권장 이유를 설명한다.

4. **구현 (Implement)**
   - 한 번에 크게 바꾸기보다 의미 있는 단위로 나눠 변경한다.
   - 기존 패턴 재사용을 우선하고, 불필요한 신규 패턴 도입을 피한다.

5. **검증 (Verify)**
   - 가능한 범위에서 반드시 최소 1개 이상 실행:
     - 테스트 / 타입체크 / 린트 / 빌드 / 실행 확인 / UI 비교
   - UI 변경은 "변경 전후 차이"를 설명한다.

6. **요약 (Summarize)**
   - 변경 파일 목록
   - 핵심 변경사항
   - 검증 결과
   - 미해결 이슈 / 가정 / 다음 액션

## 완료 기준 (Definition of Done)

- 의도한 동작이 확인되었다.
- 관련 에러/타입/린트/빌드 문제를 가능한 범위에서 확인했다.
- 변경 이유와 영향 범위를 요약했다.
- 다음 사람이 이어서 작업할 수 있도록 맥락을 남겼다.
- 가능하면 **요청 원문 대비 개선된 접근이 무엇이었는지** 설명했다.

## 검증 우선 규칙 (매우 중요)

- "그럴듯한 코드"보다 **검증된 코드**를 우선한다.
- 가능한 검증 우선순위:
  1. 타겟 테스트
  2. 타입체크
  3. 린트
  4. 빌드
  5. 실행 결과 확인 / UI 확인
- 에러를 숨기거나 우회하지 말고 **근본 원인**을 해결한다.
- 실패 시:
  - 증상
  - 재현 조건
  - 원인 가설
  - 확인 결과
  - 수정 내용
    을 분리해서 정리한다.

## 컨텍스트 관리 규칙 (매우 중요)

- 장기 세션에서 같은 실수를 반복하면 접근 방식을 재설계한다.
- 긴 작업에서는 중간중간 맥락을 요약한다:
  - 수정 파일 목록
  - 실행 명령어
  - 검증 결과
  - 미해결 이슈

## 코드 변경 원칙 (공통)

- 가독성 > 과도한 축약
- 작은 함수 / 명확한 이름 / 예측 가능한 구조 선호
- 중복 제거는 하되, 과도한 추상화는 피한다
- 기존 코드 스타일/구조와 일관성을 우선한다
- 변경 범위를 넘는 리팩터링은 분리 제안 후 진행한다
- 재사용 가능한 값(상태 목록/매핑/라벨/상수)은 **constants 또는 shared module** 분리를 우선 검토한다
- 구현 전에 "공통화/재사용/자동화" 여지가 있는지 먼저 확인한다

## UI/UX 설계 규칙

- UI는 "예쁘게"보다 **사용 주체와 목적에 맞게 빠르게 이해/실행 가능하게** 설계한다.
- 화면 설계 전 반드시 먼저 판단한다:
  1. 이 화면의 주체는 누구인가? (일반 사용자 / 관리자 / 운영자)
  2. 이 화면에 들어온 이유는 무엇인가? (조회 / 신청 / 수정 / 승인 / 검수 / 정산 / 검색 / 대응)
  3. 사용자가 가장 먼저 확인해야 하는 정보는 무엇인가?
  4. 사용자가 가장 빨리 실행해야 하는 액션은 무엇인가?

### 화면 설계 체크리스트 (구현 전/후 공통)

- 핵심 정보/KPI가 첫 화면에서 바로 보이는가?
- 화면 진입 목적을 3클릭 이내(가능하면 1~2클릭)로 수행할 수 있는가?
- 시선 흐름(상단 요약 → 핵심 영역 → 상세 영역)이 의도대로 설계되었는가?
- 로딩/빈 상태/에러/권한 없음 상태가 일관되게 처리되는가?
- 모바일에서도 핵심 조회/핵심 액션이 가능한가? (특히 관리자 테이블/필터)

## 프로젝트 전체 디자인 일관성 규칙 (매우 중요)

- 프로젝트 내 모든 화면은 **공통 디자인 시스템**을 따른다.
- 화면마다 임시 스타일을 늘리기보다 아래를 우선 재사용한다:
  - 공통 레이아웃 (페이지 헤더, 섹션 간격, 카드 구조)
  - 공통 타이포 규칙 (페이지 제목, 섹션 제목, 본문, 보조텍스트)
  - 공통 상태 표현 (Chip/Badge 색상, 라벨 문구, 아이콘 규칙)
  - 공통 테이블 규칙 (헤더/정렬/액션 위치/빈 상태)
  - 공통 폼 규칙 (필드 간격, 필수값 표시, 검증 메시지, 도움말)
  - 공통 피드백 규칙 (Snackbar/Alert/Dialog 문구 톤)
- 새 UI를 만들 때는 먼저 **기존 패턴 재사용 가능 여부**를 확인하고, 불가할 때만 새 패턴을 제안한다.
- 새 패턴 도입 시:
  - 재사용 가능성
  - 공통 컴포넌트 승격 여부
  - theme/token 반영 여부
    를 함께 검토한다.
- 화면 단위 임시 스타일(`sx`) 추가 전, theme / shared component / token으로 해결 가능한지 먼저 검토한다.

## 위험 작업 승인 규칙

- 아래 작업은 실행 전 반드시 계획/영향 범위를 먼저 설명한다:
  - 대량 파일 삭제/이동
  - DB 스키마 변경 / 마이그레이션
  - 배포/인프라/권한 설정 변경
  - 실운영 데이터 수정
  - 비용 발생 가능성이 있는 외부 API 실제 호출
- 가능한 경우 드라이런/백업/미리보기부터 제안한다.
- 위험 작업일수록 "현재 요청안" 외에 **더 안전한 대안**을 함께 제시한다.

## Claude 사용 팁 (실행 효율)

- 여러 파일 수정/불확실한 작업은 먼저 Plan Mode 또는 계획 단계로 분리한다.
- 작은 변경(오탈자/단순 로그/명칭 변경)은 바로 구현해도 된다.
- 반복적으로 강제해야 하는 동작(예: 저장 후 린트)은 가능하면 hooks로 옮기는 것을 검토한다.
- "바로 구현" 요청처럼 보여도, 먼저 **더 나은 방법이 있는지 짧게라도 검토**한 뒤 진행한다.
