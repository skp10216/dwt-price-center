---
name: price-table-integration-dev-rules-design-system-v1
description: design-system
---

# Overview
# RULES_UI_MUI_단가표_통합관리_개발규칙_디자인시스템_v1

> 목적: 단가표 통합 관리 시스템을 **빠르게** 만들되, 배포 이후에도 **유지보수/확장/운영**이 쉬운 구조를 강제한다.  
> UI는 **MUI(Material UI)** 를 기준으로 전 화면을 통일한다. (디자인 일관성/개발 효율 최우선)

---

## 1) 개발 방법론(필수)

### 1.1 Vertical Slice 개발(업무 흐름 단위 완성)
기능을 “화면”이 아니라 **업무 흐름** 단위로 끝까지 만든다.

- Slice 1: SSOT 모델 관리(등록/편집/숨김) + 감사로그
- Slice 2: 본사 엑셀 업로드(job) → 매핑 결과 → 검수 → 확정/적용(Apply Lock 포함)
- Slice 3: 거래처 업로드(job) → (이미지) 테이블 추출 → SSOT 후보 → 검수 → 저장
- Slice 4: 비교 화면(관리자 지정 리스트 + 사용자 개인 리스트/즐겨찾기)
- Slice 5: 사용자/권한/감사로그 UX 고도화

### 1.2 Definition of Done(DoD) 체크리스트
각 Slice/기능은 아래를 모두 만족해야 “완료”로 인정한다.
- 권한 체크(관리자/뷰어)
- 감사로그 기록(변경 전/후)
- 실패/예외 처리(사용자 메시지 포함)
- 핵심 로직 최소 테스트 1개
- UI 일관성(MUI 공통 컴포넌트/토큰 사용)

---

## 2) 아키텍처 규칙(필수)

### 2.1 SSOT 무결성(절대 규칙)
- **SSOT 자동 생성 금지**(미매핑은 보류/제외/SSOT 등록 후 재업로드로만 해결)
- 삭제 금지 기본값: **숨김(비활성)** 중심 운영
- SSOT 중복 방지 규칙은 DB Unique + API 사전 검증 둘 다 적용

### 2.2 업로드는 반드시 job_id 비동기
- API는 업로드 요청을 받으면 **즉시 job_id 반환**
- Worker가 변환/매칭 수행 후 DB에 결과 저장
- UI는 job 상태 기반으로 검수/확정 흐름을 제어

### 2.3 Apply(적용)은 락으로 보호
- 본사 단가 “현재 적용본”은 **한 번에 1명만 적용 가능**
- 락 중에는 다른 사용자는 “적용 진행 중” 안내만 표시

### 2.4 감사로그는 트랜잭션 단위로 묶는다
- 업로드 확정/적용 같은 큰 작업은 `trace_id`(작업 ID)로 묶어 추적 가능하게 한다.

---

## 3) 코드/유지보수 규칙(공통)

### 3.1 도메인 중심 모듈 구조
프론트/백엔드 모두 아래 도메인 단위로 모듈화한다.
- `auth`, `users`, `ssot-models`, `grades`, `hq-prices`, `partners`, `partner-prices`, `uploads`, `lists`, `compare`, `audit`

### 3.2 API 응답/에러 포맷 통일
- 성공: `{ data, meta }`
- 실패: `{ error: { code, message, details } }`
- 프론트는 `code` 기준으로 분기한다(문구는 서버가 제공)

### 3.3 상태/enum 단일화
- 제조사/타입/연결성/등급 등 핵심 enum은 **단일 소스**로 관리한다.
- 프론트와 백엔드에서 의미가 달라지는 enum 생성 금지.

### 3.4 Job 표준
- 상태: `queued` → `running` → `succeeded` | `failed`
- 진행률: 단계 기반(0/25/50/75/100)으로 시작
- 결과는 항상 DB에 저장(프론트는 결과 조회로 렌더)

---

## 4) UI/UX 디자인 시스템 (MUI 기준, 필수)

## 4.1 UI 프레임워크 고정
- UI는 **MUI(Material UI)** 로 전면 통일한다.
- 임의의 CSS 프레임워크/컴포넌트 혼용 금지(예: Tailwind/shadcn 혼용 금지).
- 예외는 “MUI가 제공하지 않는 특수 기능”일 때만 도입하며, 도입 시 공통 컴포넌트로 캡슐화한다.

## 4.2 Theme 기반 통일(토큰 우선)
- 색상/타이포/간격/라운드/그림자 등은 반드시 **MUI Theme 토큰**으로 관리한다.
- 페이지에서 임의로 컬러/크기 하드코딩 금지(예: `#123456`, `font-size: 13px` 직접 지정 금지).

### 4.2.1 Typography(폰트/가독성)
- 폰트는 1개로 통일(프로젝트에서 지정한 기본 폰트만 사용)
- 텍스트 스케일은 Theme에 정의된 variant만 사용  
  - 예: `h4/h5/h6`, `subtitle1/subtitle2`, `body1/body2`, `caption`

### 4.2.2 Color(버튼/상태 컬러 규칙)
- Primary: 핵심 CTA(등록/저장/확정/적용)
- Secondary: 보조 동작
- Success: 완료/성공 상태
- Error: 실패/삭제 위험 동작(삭제는 원칙적으로 숨김/비활성 사용)
- Warning: 주의/저신뢰/미매핑

**상태 배지/아이콘 컬러는 전 화면에서 동일 규칙으로 사용한다.**

### 4.2.3 Spacing/Layout(배치 통일)
- 화면은 항상 동일한 구조를 권장한다.
  - 상단: Page Title + 상태 뱃지 + 주요 CTA 1개
  - 본문: 좌측(필터/리스트) / 우측(테이블/결과) 2단 레이아웃
- 간격은 Theme spacing 단위로만 사용(예: `theme.spacing(2)`)

## 4.3 공통 컴포넌트 우선(필수)
페이지에서 직접 UI를 만들지 말고 아래 공통 컴포넌트를 재사용한다.

- `AppLayout` (사이드바/상단바/컨텐츠)
- `PageHeader` (제목/설명/CTA/상태 표시)
- `PrimaryButton`, `SecondaryButton`, `DangerButton`(가능하면 Danger 최소)
- `ConfirmDialog` (확정/적용/숨김)
- `Toast/Snackbar` (성공/실패/경고)
- `DataTable` (리스트/비교 공통)
- `UploadDropzone` (파일 선택/유효성/진행 상태)
- `JobStatusBanner` (queued/running/succeeded/failed 표준 표시)
- `ReviewPanel` (검수 화면: 후보/수정/확정)

## 4.4 MUI DataGrid(권장)
- 테이블/비교 화면은 **MUI X DataGrid** 사용을 권장한다.
- 가격은 숫자 정렬(우측 정렬) + 천단위 포맷 통일
- 헤더/행 높이/컬럼 정렬/필터 UI는 공통 설정으로 통일

## 4.5 검수 화면 레이아웃(강제)
- 검수(Review)는 항상 2단 구성을 유지한다.
  - 좌측: 원본/추출 결과(미리보기)
  - 우측: 매칭 후보/수정/확정 액션

## 4.6 접근성/일관성 체크(필수)
- 버튼 라벨은 동사로 시작(예: “저장”, “확정”, “적용”, “숨김”)
- 위험 동작(적용/확정)은 ConfirmDialog 1회 필수
- 로딩/비활성 상태 표준화(버튼 로딩, 테이블 스켈레톤)

---


## 6) 금지 사항(반드시 지킬 것)
- 업로드 처리(파싱/OCR/매칭)를 API 요청-응답에 넣는 것(동기 처리 금지)
- UI 라이브러리 혼용(Tailwind/shadcn 등)  
- 페이지별 임의 스타일/색상/버튼 규격(Theme/공통 컴포넌트 우선)

