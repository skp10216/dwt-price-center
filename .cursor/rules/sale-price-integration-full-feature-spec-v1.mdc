---
name: sale-price-integration-full-feature-spec-v1
description: full-feature-spec
---

# Overview
# 단가표 통합 관리 시스템 — 전체 기능 명세서 (v1)
> 목적: 엑셀로 관리하던 **본사 판매 단가표**를 웹에서 **SSOT(단일 기준 모델)**로 통합 관리하고, 거래처별(지역/업체) 단가표를 업로드(이미지/엑셀)하여 **동일 모델 기준으로 가격을 한눈에 비교**할 수 있는 관리자 시스템을 운영한다.  
> 본 문서는 **무엇을 만들고, 어떻게 동작/운영되는지**를 정의한다. 

---

## 0. 운영 전제(잠금 원칙)
### 0.1 로그인/권한
- ✅ **모든 사용자는 계정 로그인이 필수**다.
- 역할은 기본 2단계로 운영한다.
  - Admin: 관리/편집/업로드/적용 가능
  - Viewer: 조회/비교/개인 리스트 관리 가능(읽기 중심)

### 0.2 본사 업로드 매칭 기준(정확도 최우선)
- 본사 엑셀 업로드는 **모델코드**를 1차 기준으로 매칭한다.
- 모델코드 누락/SSOT 미등록은 **미매핑**으로 분류한다.

### 0.3 SSOT 자동 생성 금지(운영 안전)
- 업로드 과정에서 **SSOT에 없는 모델은 자동 생성하지 않는다.**
- 미매핑은 관리자 판단으로:
  - 제외 후 적용 / 보류 / SSOT 등록 후 재업로드(재매핑)

### 0.4 등급/차감 삭제 원칙(데이터 보호)
- 등급/차감(항목/레벨)은 관리자 유동 관리가 가능하나,
- **사용 중인 항목은 삭제하지 않고 비활성화**로 운영한다.
- 삭제가 필요하면 **대체 항목으로 치환 후 제거**한다.

---

## 1. IA(메뉴 트리) 요약
### 1.1 공통(모든 사용자)
- 본사 판매 단가 리스트
- 업체별 단가 비교
  - 선택 모델 비교(관리자 선택 리스트 기반, 개수 가변)
  - 모델 단일 비교
  - 내 리스트로 비교(개인화)
- 내 리스트(즐겨찾기) 관리
- 모델 검색/조회(SSOT 읽기 전용)

### 1.2 관리자 전용
- SSOT 모델 & 등급별 가격 관리
- 본사 단가표 운영(엑셀 업로드/검수/확정/적용)
- 거래처 관리
- 거래처 단가표 운영(이미지→테이블 변환→SSOT 매칭→검수→저장)
- 등급 관리
- 차감 관리(정액 차감)
- 감사로그
- 사용자 관리

---

## 2. 공통 용어 정의
- **SSOT 모델**: 가격/비교/업로드/매핑의 기준이 되는 “단일 기준 모델”
- **모델코드**: 본사 판매표에 존재하는 고유 코드. 본사 업로드 1차 매칭 키
- **등급**: 중고 기기 상태 등급(A+, A, A-, B+ … 수출/기타 등)
- **정액 차감**: 상태 이슈별 고정 금액 차감(최종가 = 등급 기본가 - 차감합)
- **거래처**: 지역/업체 단위의 단가표 제공 주체(부천/광명/서울…)
- **테이블 변환**: 거래처 이미지/엑셀에서 표(행/열)를 추출하는 과정
- **매칭**: 추출된 행을 SSOT 모델에 연결하는 과정(거래처 표기 → 모델코드)
- **검수**: 자동 매칭/추출 결과를 사람이 확인·수정하는 단계
- **확정/적용**
  - 확정: 검수 결과를 “이번 업로드 결과”로 확정(변경안 고정)
  - 적용: 확정된 변경안을 “현재 단가표”로 반영(운영 기준 갱신)

---

# SPEC_01 로그인 & 권한

## 1. 목적
- 모든 사용자는 로그인 후 시스템을 사용한다.
- Admin/Viewer 권한을 명확히 분리하여 운영 안전과 조회 편의성을 동시에 확보한다.

## 2. 권한 정책(기본)
- Admin
  - SSOT/가격/업로드/거래처/등급/차감/로그/사용자 관리 가능
- Viewer
  - 본사 단가 조회, 거래처 비교, 내 리스트 관리 가능
  - 관리자 메뉴 접근 불가

## 3. 핵심 시나리오
- 로그인 성공 → 역할에 따라 접근 가능한 메뉴만 노출
- 권한 없는 페이지 접근 → 차단 + 안내(권장: 접근 요청 안내)

## 4. 감사로그
- 로그인/로그아웃은 옵션(보안 필요 시 기록)
- 사용자 생성/권한 변경/비활성화는 필수 기록(SPEC_11 참조)

---

# SPEC_02 본사 판매 단가 리스트(공통)

## 1. 목적
- 사용자가 “현재 본사 단가”를 엑셀 없이 즉시 확인할 수 있게 한다.
- 기준 시점(적용 일시/버전)을 함께 제공하여 혼선을 방지한다.

## 2. 사용자 및 권한
- Admin: 조회 + (옵션) 일부 직접 수정 링크(권장: SSOT/업로드 화면으로 유도)
- Viewer: 조회 + 내 리스트/즐겨찾기

## 3. 표시/구성(필수)
- 상단: 최종 업데이트(적용 기준) 일시, 적용 버전(옵션), 적용 메모(옵션)
- 목록: SSOT 기준 표준화 표시
  - 검색: 모델명/모델코드
  - 필터: 제조사/타입/시리즈/스토리지/등급
  - 등급 선택(기본값은 운영 설정값)
- 행 정보(권장)
  - 타입/제조사/시리즈/모델명/스토리지/(태블릿 연결성)
  - 선택 등급의 가격
  - (옵션) 최근 변경 여부 배지

## 4. 개인화(필수)
- 즐겨찾기(⭐) 토글
- 즐겨찾기만 보기
- 내 리스트에 추가(컬렉션 선택)

## 5. 예외/경고
- 가격 미설정 모델은 “미설정” 표시(오해 방지)

## 6. 감사로그
- Viewer의 즐겨찾기/내 리스트 변경은 옵션(운영 필요 시 기록)
- 본사 단가 리스트 자체는 “적용 단가표”를 조회하므로, 적용 이벤트는 SPEC_06에서 기록

---

# SPEC_03 업체별 단가 비교(공통)

## 1. 목적
- 동일 모델 기준으로 거래처별 가격을 한눈에 비교하여 의사결정을 빠르게 한다.

## 2. 사용자 및 권한
- Admin/Viewer: 조회 가능
- 비교 기준은 SSOT 모델이며, 거래처 단가표에서 매칭된 데이터만 비교에 사용된다.

## 3. 주요 기능
### 3.1 선택 모델 비교(핵심)
- 비교 대상 모델은 “관리자 지정 비교 리스트”를 기본으로 한다.
- 사용자는 필요 시 모델을 검색하여 비교 대상에 추가(권장: 개인 리스트에만 추가)
- 테이블: 모델(행) × 거래처(열)
- 등급 선택: 한 번에 1개 등급 기준으로 비교(기본)
- 자동 하이라이트: 최저/최고 표시
- 거래처 필터: 전체/선택

### 3.2 내 리스트로 비교(개인화)
- 관리자가 100개를 지정해도, 사용자는 내 리스트(컬렉션)만 선택하여 더 간결하게 비교 가능

### 3.3 모델 단일 비교(상세)
- 특정 모델 1개를 거래처별로 상세 비교(가격/변동 메모 등 옵션)

## 4. 예외/경고
- 거래처 단가가 없는 경우: “미등록/미매핑” 표시
- 거래처 데이터가 오래된 경우: “업데이트 시각” 표시(권장)

## 5. 감사로그
- 비교 조회는 기본 미기록(옵션)
- 관리자 비교 리스트 변경은 기록(권장)

---

# SPEC_04 내 리스트(즐겨찾기/개인 리스트)(공통)

## 1. 목적
- 사용자가 자주 보는 모델/비교 대상을 개인화하여 작업 효율을 높인다.

## 2. 구성
- 즐겨찾기(단일): 별표 토글로 빠른 즐겨찾기
- 내 리스트(컬렉션): 여러 개 저장 가능
  - 예: “아이폰 주력”, “갤럭시 A급”, “이번 주 문의 모델”

## 3. 핵심 시나리오
- 모델 목록/비교 화면에서 “내 리스트 추가”
- 내 리스트 관리 화면에서 리스트 생성/이름 변경/삭제(빈 리스트일 때 삭제 권장)
- 내 리스트를 선택해 비교 화면에 적용

## 4. 예외/정책
- 비활성 SSOT 모델은 사용자 목록에서 숨김(권장: 숨김 처리 + 안내 배지)

## 5. 감사로그
- 기본 미기록(운영 필요 시 기록 옵션)

---

# SPEC_05 SSOT 모델 & 등급별 가격 관리(관리자)

## 1. 목적
- SSOT 모델을 중복 없이 관리하고, 모델별 등급 기본가를 안정적으로 편집한다.

## 2. 분류 구조(필수)
- 스마트폰 > 애플/삼성/기타
- 태블릿 > 애플/삼성/기타
- 웨어러블 > 애플/삼성/기타

## 3. 모델 등록 필수값(확정)
- 타입(필수), 제조사(필수), **시리즈(필수)**, 모델명(필수), 스토리지(필수), **모델코드(필수/수동)**
- 연결성:
  - 스마트폰 LTE 고정
  - 태블릿 WiFi/WiFi+Cellular 선택
  - 웨어러블 Standard 고정
- 스토리지 표기:
  - 32/64/128 … 은 GB
  - 1TB/2TB는 TB

## 4. 등급별 기본가
- SSOT 모델 상세에서 **항상 편집 가능(기본)**

## 5. 비활성화 정책(확정)
- 비활성 모델은 Viewer 화면에서 **숨김 처리**

## 6. 감사로그(필수)
- 모델 생성/수정/비활성화
- 등급별 기본가 변경(전/후)

---

# SPEC_06 본사 단가표 운영(엑셀 업로드)(관리자)

## 1. 목적
- 본사 엑셀 단가표를 업로드해 모델코드 기반으로 정확히 매핑하고 검수 후 적용한다.

## 2. 업로드 플로우(확정)
**업로드 → 자동 매핑 → 검수 → 확정 → 적용**

## 3. 자동 매핑 규칙(확정)
- 1차 매칭 키: **모델코드**
- 모델코드 누락 또는 SSOT 미등록: **미매핑**

## 4. 미매핑 처리 정책(확정)
- **SSOT 자동 생성 금지**
- 제외/보류/SSOT 등록 후 재업로드 중 관리자 선택

## 5. 확정 vs 적용(필수 분리)
- 확정: 검수 완료 결과 고정
- 적용: 현재 본사 단가 갱신(업데이트 일시/버전 갱신)

## 6. 감사로그(필수)
- 업로드 시작/완료
- 검수 수정(전/후)
- 확정/적용 이벤트

---

# SPEC_07 거래처 단가표 운영(이미지/엑셀)(관리자)

## 1. 목적
- 거래처 단가표를 업로드해 테이블로 변환하고 SSOT 기준으로 매칭/검수 후 저장한다.

## 2. 업로드 플로우(확정)
- 엑셀: 업로드 → 자동 매핑 → 검수 → 저장
- 이미지: **이미지 → 테이블 변환 → SSOT 매칭 → 검수 → 저장**

## 3. 매칭 누적(정확도 향상)
- 거래처 표기(문자열) ↔ 모델코드 연결을 축적하여 반복 업로드 시 자동 매칭률을 올린다.

## 4. 이미지 품질 경고(필수)
- 흐림/잘림/해상도 부족 경고
- 저신뢰 행/값 강조 표시

## 5. 범위 확정(중요)
- 거래처 단가표에는 **차감표가 없다.**
- 비교는 기본가 중심으로 운영한다.

## 6. 감사로그(필수)
- 업로드/변환/검수/저장
- 수동 매핑 변경(전/후)

---

# SPEC_08 등급 관리(관리자)

## 1. 목적
- 등급 체계를 유동적으로 관리한다(추가/정렬/비활성화).

## 2. 정책(확정)
- 사용 중 등급 **삭제 금지**, 비활성화로 운영
- 삭제 필요 시 치환 후 제거

## 3. 감사로그(필수)
- 등급 추가/수정/정렬/비활성화/치환

---

# SPEC_09 차감 관리(정액 차감)(관리자)

## 1. 목적
- 본사 기준 정액 차감 항목/레벨/금액을 유동적으로 관리한다.

## 2. 정책(확정)
- 사용 중 항목/레벨 **삭제 금지**, 비활성화로 운영
- 삭제 필요 시 치환 후 제거

## 3. 감사로그(필수)
- 항목/레벨/금액 변경 전/후

---

# SPEC_10 감사로그(관리자)

## 1. 목적
- 누가 언제 무엇을 어떻게 변경했는지 추적 가능하게 하여 운영 신뢰를 확보한다.

## 2. 필수 기록 대상(확정)
- SSOT 모델 변경
- 등급 변경
- 차감 변경
- 본사 업로드 검수/확정/적용
- 거래처 업로드 변환/검수/저장 및 매핑 변경
- 사용자 생성/권한 변경/비활성화

## 3. 조회 기능(권장)
- 기간/사용자/메뉴/작업유형 필터
- 업로드 작업 단위(trace) 묶음 보기
- 변경 전/후 상세 보기

---

# SPEC_11 사용자 관리(관리자)

## 1. 목적
- 로그인 필수 전제에서, 운영자가 사용자 계정을 생성/관리하고 역할을 부여한다.

## 2. 기능(필수)
- 계정 생성 / 비활성화(로그인 차단)
- 역할 부여(Admin/Viewer)
- (옵션) 잠금/초기화, 최근 로그인/활동 표시

## 3. 정책(권장)
- 삭제 대신 비활성화 운영(감사로그 추적 안정성)

## 4. 감사로그(필수)
- 생성/비활성화/역할 변경 전/후

---

## 부록 A. 문서 버전 관리
- v1: 기능 범위 확정(와이어프레임/데이터모델/API 제외), 운영 정책/예외/감사로그 기준 포함
