# 입출금(CashEvent) 타임라인 설계서

> 작성일: 2026-02-27
> 상태: 승인됨
> 범위: 기능 설계 + IA + 텍스트 와이어프레임 (코드 구현 전 단계)

---

## 1. 배경

거래처 입출금 관리를 "운영 수준 도구"로 격상한다.
현재 `/settlement/transactions` 페이지는 기본 CRUD + 필터 수준이며,
실무에서 필요한 기간 탐색, 토큰 검색, 듀얼 뷰, Detail Drawer, 보류/숨김 등이 없다.

### 1.1 기능 요구

| # | 요구 | 설명 |
|---|------|------|
| F1 | 기간 프리셋 | 오늘/7일/이번달/지난달/커스텀 + 월 점프(미니 캘린더) |
| F2 | 필터 | 거래처/금액범위/입금·출금/상태/출처 |
| F3 | 토큰형 검색 | `거래처:광명 amount>1000000 memo:환전` |
| F4 | 듀얼 뷰 | 타임라인 뷰 ↔ 그리드(DataGrid) 뷰 토글 |
| F5 | Detail Drawer | 항목 클릭 → 우측 패널: 원본정보/증빙/연결전표/배분/보류/숨김 |
| F6 | 성능 | 서버 페이징 + 가상 스크롤, 모바일 최적화 |

### 1.2 운영 요구

| # | 요구 | 설명 |
|---|------|------|
| O1 | 비동기 처리 | 업로드/변환은 job_id 기반, 동기 대기 금지 |
| O2 | 검수 → 확정 | 자동매칭/대량 반영은 단계 분리, 적용은 락(동시 1명) |
| O3 | 감사 로그 | 누가/언제/무엇/어떻게 + 변경 전후, trace_id로 묶기 |
| O4 | 숨김/무효 | 삭제 대신 숨김/무효 처리 기본 |

---

## A. 배치 분석 — 어느 페이지에 추가하는 게 최적인가

### 대안 비교

| 평가 기준 | 대안 1: 기존 페이지 전면 수정 | 대안 2: 신규 `/cash-events` 페이지 |
|---|---|---|
| **URL** | `/settlement/transactions` 유지 | `/settlement/cash-events` 신규 |
| **기존 코드 영향** | 높음 — 525줄 모노리스 전면 교체 | 없음 — 독립 개발 |
| **메뉴** | 변경 없음 | 항목 추가 필요, "입출금 관리"와 역할 중복 |
| **외부 참조** | 유지 — FAB·거래처 상세·대시보드 링크 | 전부 깨짐 — 리다이렉트 또는 수정 필요 |
| **점진적 전환** | 불가 — 한 번에 교체 | 가능 — 병행 후 기존 제거 |
| **회귀 위험** | 높음 — 등록/배분/취소 기능 영향 | 낮음 |
| **코드 분리** | 낮음 | 높음 |

### 결론: 대안 1 — 기존 경로 유지 + 내부 컴포넌트 분리 재설계

**핵심 근거**:

1. **URL 안정성**: `/settlement/transactions`는 AppLayout FAB, 거래처 상세 입출금 탭, 대시보드 KPI 링크 등 **최소 6곳**에서 참조. URL 변경의 ripple effect가 크다.
2. **메뉴 혼란 방지**: "입출금 관리"와 "입출금 타임라인"이 메뉴에 공존하면 사용자 혼란. **하나의 강력한 페이지**가 낫다.
3. **내부 분리로 위험 관리**: `page.tsx`를 얇은 래퍼로 바꾸고, `_components/`에 독립 컴포넌트를 배치하면 기존 코드 영향을 최소화하면서 점진적 구현 가능.

**파일 구조**:

```
/settlement/transactions/
  page.tsx                          ← 얇은 래퍼 (URL 파라미터 파싱 + Provider)
  _components/
    CashEventProvider.tsx           ← 상태 관리 Context
    CashEventToolbar.tsx            ← 기간 프리셋 + 토큰 검색 + 필터
    CashEventTimelineView.tsx       ← 타임라인 뷰
    CashEventGridView.tsx           ← 그리드 뷰 (AppDataTable 재사용)
    CashEventDetailDrawer.tsx       ← 우측 Detail Drawer
    TokenSearchInput.tsx            ← 토큰형 검색 입력
    DatePresetBar.tsx               ← 기간 프리셋 + 날짜 점프
    ViewToggle.tsx                  ← 타임라인 ↔ 그리드 토글
```

기존 `TransactionCreateDialog`, `AllocationDialog`는 그대로 재사용.

---

## B. IA / 메뉴 구조

### B-1. 사이드바 메뉴 (변경 없음)

```
정산
├─ 대시보드              /settlement/dashboard
├─ UPM 업로드            /settlement/upload
├─ 업로드 내역           /settlement/upload/jobs
├─ 전표 목록             /settlement/vouchers
├─ 입출금 관리           /settlement/transactions     ◀ 내부 강화
├─ 상계 관리             /settlement/netting
├─ 은행 임포트           /settlement/bank-import
├─ 거래처 현황           /settlement/status
├─ 거래처 관리           /settlement/counterparties
├─ 마감 관리             /settlement/lock
└─ 작업 내역             /settlement/activity
```

메뉴 라벨·아이콘·위치 모두 현행 유지. 내부 UX만 교체.

### B-2. 딥링크 URL 설계

모든 필터/뷰 상태를 쿼리 파라미터로 표현하여, 외부 페이지에서 특정 상태로 직접 진입 가능.

```
# 기본
/settlement/transactions

# 뷰 모드
?view=timeline | grid

# 기간 프리셋
?preset=today | week | thisMonth | lastMonth
?from=2026-02-01&to=2026-02-28            ← 커스텀 (preset 무시)

# 필터
?counterparty={uuid}                       ← 거래처
?type=deposit | withdrawal                 ← 유형
?status=pending,partial                    ← 복수 가능 (쉼표)
?source=BANK_IMPORT                        ← 출처
?amountMin=1000000&amountMax=5000000       ← 금액 범위

# Detail Drawer
?detail={transactionId}                    ← Drawer 열기

# 토큰 검색
?q=거래처:광명+amount>1000000              ← URL 인코딩 토큰
```

### B-3. 진입 동선

```
                    ┌──────────────┐
                    │  대시보드     │
                    └──┬───┬───┬──┘
    "미배분 입금 N건"  │   │   │  "미배분 출금 N건"
     ?status=pending   │   │   │   ?status=pending
     &type=deposit     │   │   │   &type=withdrawal
                       ▼   │   ▼
                ┌──────────────────────┐
                │   입출금 관리 (강화)   │◀──── FAB "입출금 등록"
                │ /settlement/         │       (TransactionCreateDialog)
                │    transactions      │
                └──┬────────────┬──────┘
                   │            │
      ?detail={id} │            │ ?counterparty={id}
                   ▼            ▼
            ┌──────────┐  ┌──────────────┐
            │ Drawer    │  │ 거래처 상세   │
            │ 입출금상세 │  │ 입출금 탭     │
            └──────────┘  └──────────────┘
                                ▲
                                │ ?counterparty={id}
                          ┌─────┴──────┐
                          │ 거래처 현황  │
                          └────────────┘

  ┌─────────────┐                      ┌─────────────┐
  │ 은행 임포트  │──── 확정 후 ────▶    │ 입출금 관리  │
  └─────────────┘  ?source=BANK_IMPORT  └─────────────┘
                   &from={date}

  ┌─────────────┐                      ┌─────────────┐
  │ 상계 관리    │──── 확정 후 ────▶    │ 입출금 관리  │
  └─────────────┘  ?source=NETTING      └─────────────┘
                   &from={date}
```

| 출발 | 트리거 | 도착 URL |
|---|---|---|
| 대시보드 | "미배분 입금 N건" 클릭 | `?status=pending&type=deposit` |
| 대시보드 | "미배분 출금 N건" 클릭 | `?status=pending&type=withdrawal` |
| 거래처 상세 | 입출금 탭 → "전체 보기" | `?counterparty={id}` |
| 거래처 상세 | 개별 입출금 행 클릭 | `?counterparty={id}&detail={txnId}` |
| 거래처 현황 | 행 → "입출금" 바로가기 | `?counterparty={id}` |
| 은행 임포트 | 확정 후 "생성된 입출금" | `?source=BANK_IMPORT&from={date}` |
| 상계 관리 | 확정 후 "생성된 입출금" | `?source=NETTING&from={date}` |

---

## C. 화면 설계 (텍스트 와이어프레임)

### C-0. 상태 enum 설계

기존 `TransactionStatus`와 요구사항 상태의 매핑:

| 요구 상태 | 백엔드 enum 값 | Chip 색상 | 비고 |
|---|---|---|---|
| 미매칭 | `pending` (기존) | error (빨강) | 전표 미배분 |
| 부분매칭 | `partial` (기존) | warning (주황) | 일부 배분 |
| 매칭완료 | `allocated` (기존) | success (초록) | 전액 배분 |
| 보류 | `on_hold` (**신규**) | warning (주황) + 아이콘 | 수동 보류, 사유 필수 |
| 숨김 | `hidden` (**신규**) | neutral (회색) | 삭제 대체, 기본 미표시 |
| (취소) | `cancelled` (기존) | default (회색) | 기본 미표시 |

```python
# backend/app/models/enums.py — TransactionStatus 확장
class TransactionStatus(str, enum.Enum):
    PENDING = "pending"
    PARTIAL = "partial"
    ALLOCATED = "allocated"
    CANCELLED = "cancelled"
    ON_HOLD = "on_hold"      # 신규
    HIDDEN = "hidden"        # 신규
```

기본 목록에서 `hidden`, `cancelled` 자동 제외. 명시적 필터 시에만 포함.

### C-1. 메인 레이아웃

```
┌──────────────────────────────────────────────────────────────────────┐
│  AppPageHeader                                                       │
│  [SwapHoriz]  입출금 관리                                             │
│               거래처 수준 입출금 이벤트 등록 및 전표 배분                    │
│                                       [1,234건]  [↻]  [+ 입출금 등록]  │
├──────────────────────────────────────────────────────────────────────┤
│  기간 바 (DatePresetBar)                                              │
│  [오늘] [7일] [이번달] [지난달] [커스텀]      [◀  2026-02  ▶]  [📅]   │
├──────────────────────────────────────────────────────────────────────┤
│  검색·필터 바 (CashEventToolbar)                                      │
│  [🔍 토큰 검색: 거래처:광명 amount>1M _________________ ]              │
│    [Chip: 거래처:광명 ✕] [Chip: amount>1M ✕]                          │
│                                                                       │
│  [거래처 ▾] [입금/출금 ▾] [상태 ▾] [금액범위 ▾] [출처 ▾]                │
│                                             [🕐 Timeline | 📊 Grid]  │
├─────────────────────────────────────────────┬────────────────────────┤
│                                             │                        │
│  (선택된 뷰 렌더링)                           │  Detail Drawer (440px) │
│                                             │  (항목 클릭 시 열림)     │
│  - 타임라인: 날짜별 카드 그룹                  │                        │
│  - 그리드: AppDataTable                      │                        │
│                                             │                        │
└─────────────────────────────────────────────┴────────────────────────┘
```

### C-2. 타임라인 뷰

날짜별 그룹핑. 각 항목은 카드 형태. 일별 소계 표시.

```
┌──────────────────────────────────────────────────────────────────────┐
│                                                                       │
│  ━━ 2026-02-27 (목) ━━━━━━━━━━  입금 +5,200,000 / 출금 -1,800,000   │
│                                                                       │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ 09:15  [입금]  광명통신                  +3,200,000  [미배분]    │  │
│  │        2월 매출 정산  ·  은행              미배분 3,200,000      │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ 11:30  [입금]  한빛유통                  +2,000,000  [부분배분]  │  │
│  │        잔금  ·  수동                      미배분 500,000        │  │
│  │        ██████████████████░░░░░░ 75%                              │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ 14:00  [출금]  세종전자                  -1,800,000  [매칭완료]  │  │
│  │        매입대금 송금  ·  수동              미배분 0              │  │
│  │        ████████████████████████ 100%                              │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  ━━ 2026-02-26 (수) ━━━━━━━━━━  입금 +8,400,000 / 출금 -3,200,000   │
│                                                                       │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ ...                                                              │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  [ ▼ 더 보기 (1,180건 남음) ]                                          │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘
```

**카드 구성**:
- 1행: 시간 · 유형Chip · 거래처명(**볼드**) · 금액(입금=파랑`+`, 출금=빨강`-`) · 상태Chip
- 2행: 메모 · 출처Chip · 미배분 잔액
- 3행(조건부): 배분 진행률 바 — partial/allocated 시에만 표시
- 보류 항목: 좌측 주황 보더 + `[보류]` Chip
- 숨김 항목: 기본 미표시, 필터 선택 시 `opacity: 0.5`로 표시
- 클릭 → Detail Drawer 열기
- 스크롤: "더 보기" 버튼 (서버 페이징). 추후 `@tanstack/react-virtual` 가능

### C-3. 그리드 뷰

기존 `AppDataTable` 패턴 재사용. 행 클릭 → Detail Drawer 연동 추가.

```
┌────────────────────────────────────────────────────────────────────────────────────────┐
│ [☐] │ 일자     │ 유형   │ 거래처     │ 금액        │ 배분액      │ 미배분      │ 출처  │ 상태      │ 메모     │ 액션       │
│─────│──────────│────────│───────────│────────────│────────────│────────────│──────│──────────│─────────│───────────│
│ [☐] │ 02-27    │ [입금] │ 광명통신   │  3,200,000 │          0 │  3,200,000 │ 은행 │ [미배분]  │ 2월매출  │ [배분] [⋮] │
│ [☐] │ 02-27    │ [입금] │ 한빛유통   │  2,000,000 │  1,500,000 │    500,000 │ 수동 │ [부분]   │ 잔금     │ [배분] [⋮] │
│ [☐] │ 02-27    │ [출금] │ 세종전자   │  1,800,000 │  1,800,000 │          0 │ 수동 │ [매칭완료]│ 매입대금 │ [상세] [⋮] │
│─────│──────────│────────│───────────│────────────│────────────│────────────│──────│──────────│─────────│───────────│
│     │          │        │ 합계      │  7,000,000 │  3,300,000 │  3,700,000 │      │          │         │            │
│─────│──────────│────────│───────────│────────────│────────────│────────────│──────│──────────│─────────│───────────│
│                                                              [◀ 1  2  3 ... 25 ▶]  50건/페이지                      │
└────────────────────────────────────────────────────────────────────────────────────────┘
```

**현재 대비 차이점**:
- 행 클릭 → Detail Drawer 열기 (기존: 없음)
- 상태 컬럼: `on_hold`(보류), `hidden`(숨김) 추가
- 금액 색상: 입금=`info`, 출금=`error` (`cellSxFn`)
- 액션 `[⋮]` 메뉴: 배분/보류/숨김/취소

### C-4. Detail Drawer

우측 슬라이드 패널 (440px). MUI `Drawer(anchor="right")`.

```
┌──────────────────────────────────┐
│  [✕ 닫기]          입출금 상세    │
├──────────────────────────────────┤
│                                   │
│  ── 기본 정보 ──                  │
│  유형       [입금]                │
│  거래처     광명통신  →            │  ← 거래처 상세 링크
│  일자       2026-02-27            │
│  금액       ₩3,200,000           │
│  출처       [은행]                │
│  상태       [미배분]              │
│  메모       2월 매출 정산         │
│  은행참조   REF-2026-0227-001     │
│  등록자     kim@dwt               │
│  등록일시   02-27 09:15           │
│                                   │
│  ── 배분 현황 ──                  │
│  ░░░░░░░░░░░░░░░░░░░░░░░ 0%      │
│  총액     3,200,000               │
│  배분됨   0                       │
│  미배분   3,200,000               │
│                                   │
│  배분 내역: (없음)                 │
│                                   │
│  [FIFO 자동 배분]  [수동 배분]     │ ← AllocationDialog 열기
│                                   │
│  ── 연결 전표 ──                  │
│  (배분으로 연결된 전표)             │
│  #V-001  01-15  판매  1.5M  →     │ ← 전표 상세 링크
│  #V-002  01-20  판매  2.2M  →     │
│                                   │
│  ── 증빙 ──                      │
│  (첨부된 파일 없음)                │
│  [+ 증빙 첨부]    ← Phase 2       │
│                                   │
│  ── 작업 ──                      │
│  [보류 처리]    [숨김 처리]        │
│  [수정] (PENDING만)               │
│  [취소] (확인 다이얼로그)          │
│                                   │
│  ── 감사 이력 ──                  │
│  02-27 09:15  등록  (kim)         │
│  02-27 10:30  자동배분 시도  (lee) │
│                                   │
└──────────────────────────────────┘
```

**섹션별 역할**:

| 섹션 | 내용 | 액션 |
|---|---|---|
| 기본 정보 | 유형/거래처/일자/금액/출처/상태/메모/은행참조/등록자 | 거래처명 → 거래처 상세 링크 |
| 배분 현황 | 진행률 바 + 총액/배분/미배분 + 배분 전표 목록 | FIFO 자동배분, 수동배분, 배분 삭제 |
| 연결 전표 | 배분으로 연결된 전표 리스트 | 전표 클릭 → 전표 상세 |
| 증빙 | 첨부 파일 목록 (Phase 2) | 업로드/다운로드 |
| 작업 | 보류/숨김/수정/취소 버튼 | 상태별 활성/비활성 |
| 감사 이력 | AuditLog 변경 이력 | 읽기 전용 |

**동작 원칙**:
- **역할 구분**: Drawer = 조회/탐색, Dialog = 입력/확인
- 배분 버튼 클릭 → 기존 `AllocationDialog` 열기 (Drawer 위에 Dialog 레이어)
- URL에 `?detail={id}` 반영 → 새로고침 시 Drawer 복원
- 데스크톱: persistent (메인 컨텐츠 폭 축소)
- 모바일: temporary (오버레이 → 전체화면)

### C-5. 토큰형 검색

```
┌──────────────────────────────────────────────────────────────────────┐
│  [🔍  거래처:광명  ✕  |  amount>1M  ✕  |  memo:환전  ✕  | ______ ] │
│                                                                       │
│  (":"  입력 시 자동완성 드롭다운)                                        │
│  ┌─────────────────────────┐                                          │
│  │ 거래처:  거래처명 검색    │                                          │
│  │ 메모:    메모 검색       │                                          │
│  │ 출처:    수동/은행/상계   │                                          │
│  │ 상태:    미배분/부분/... │                                          │
│  │ 유형:    입금/출금       │                                          │
│  │ amount>  금액 초과       │                                          │
│  │ amount<  금액 미만       │                                          │
│  └─────────────────────────┘                                          │
└──────────────────────────────────────────────────────────────────────┘
```

**파싱 문법**:

```
<key>:<value>          문자열 필터 (LIKE)
<key><op><number>      숫자 비교 (>, <, >=, =)
<plain text>           자유 텍스트 → 거래처명+메모 동시 검색

지원 키:
  거래처: / cp:          counterparty_name LIKE '%value%'
  메모: / memo:          memo LIKE '%value%'
  출처: / source:        source = value (수동|은행|상계)
  상태: / status:        status = value
  유형: / type:          transaction_type = value (입금|출금)

숫자:
  amount>1000000         amount > 1000000
  amount<5000000         amount < 5000000
  amount>=1000000        amount >= 1000000
  amount=3000000         amount = 3000000
```

**UX 동작**:
- 실시간 토큰 파싱 → 인식된 토큰은 Chip으로 변환
- Chip `onDelete` → 필터 제거
- Backspace → 마지막 Chip 삭제
- Enter → 검색 실행 (debounce 300ms)
- 각 토큰 → 서버 API의 개별 쿼리 파라미터로 변환

### C-6. 모바일 대응

```
┌────────────────────────┐       ┌────────────────────────┐
│ [≡]  입출금 관리  [+]   │       │ [← 뒤로]  입출금 상세   │
├────────────────────────┤       ├────────────────────────┤
│ [오늘][7일][이번달]     │       │                         │
│ [지난달][커스텀]        │       │  (Drawer 내용을          │
│ [🔍 검색...]           │       │   전체화면으로 표시)      │
│ [필터 ▾] (BottomSheet) │       │                         │
├────────────────────────┤       │  ── 기본 정보 ──        │
│ [Timeline] [Grid]      │       │  유형  [입금]            │
├────────────────────────┤       │  거래처  광명통신 →      │
│                         │       │  금액  ₩3,200,000      │
│ ━ 02-27 (목) ━━━━━━━━  │       │  ...                    │
│ ┌────────────────────┐ │       │                         │
│ │ [입금] 광명통신      │ │       │  ── 배분 현황 ──        │
│ │ +3,200,000 [미배분]  │ │       │  ...                    │
│ │ 은행 · 2월 매출      │ │       │                         │
│ └────────────────────┘ │       │  [FIFO 배분] [수동 배분]  │
│ ┌────────────────────┐ │       │                         │
│ │ [출금] 세종전자      │ │       └────────────────────────┘
│ │ -1,800,000 [완료]   │ │
│ │ 수동 · 매입대금      │ │
│ └────────────────────┘ │
│                         │
│ [▼ 더 보기]             │
└────────────────────────┘
  (리스트)                          (상세 — 탭 시 전체화면)
```

**모바일 원칙**:
- 그리드 뷰 → 카드 리스트로 폴백 (열 수 많아 테이블 부적합)
- 타임라인 뷰 = 모바일 기본 뷰
- Detail Drawer → 전체화면 슬라이드
- 필터 → BottomSheet로 접기
- 토큰 검색 → 단순 텍스트 검색 폴백 (모바일에서 토큰 입력 불편)

---

## 운영 요구 → 화면 반영 매핑

| 운영 요구 | 반영 위치 | 구현 |
|---|---|---|
| O1 비동기 처리 | 은행 임포트 → 타임라인 진입 | 확정 후 딥링크 제공. Transaction 조회이므로 폴링 불필요 |
| O2 검수→확정 분리 | Drawer 배분 섹션 | 자동 배분 결과 프리뷰 → 확정 버튼 |
| O2 적용 락 | Drawer 배분 실행 시 | 낙관적 락 — API에서 동시 수정 감지 시 409, UI에 충돌 메시지 |
| O3 감사로그 | Drawer 감사 이력 섹션 | AuditLog(target_type+target_id), trace_id 그룹핑 |
| O4 숨김/무효 | Drawer 작업 섹션 | "숨김 처리" → status=hidden, 기본 목록에서 자동 제외 |
| O4 보류 | Drawer 작업 섹션 | "보류 처리" → 사유 입력 Dialog → status=on_hold |

---

## 구현 범위 (Phase 분리)

| Phase | 범위 | 주요 작업 |
|---|---|---|
| **P1** | 컴포넌트 분리 + 그리드 강화 | page.tsx → Provider + 컴포넌트 분리, 금액범위/복수상태 필터, Detail Drawer (기본정보+배분) |
| **P2** | 타임라인 뷰 + 토큰 검색 | 타임라인 뷰, 날짜 점프, 토큰형 검색, 뷰 토글 |
| **P3** | 운영 기능 | 보류/숨김 상태(BE enum 확장), 감사이력 섹션, 모바일 최적화 |
| **P4** | 증빙 / 고급 | 증빙 첨부, 가상 스크롤(@tanstack/react-virtual), 낙관적 락 |

---

## 변경 영향 요약

### 백엔드

| 파일 | 변경 |
|---|---|
| `models/enums.py` | `TransactionStatus`에 `ON_HOLD`, `HIDDEN` 추가 / `AuditAction`에 4개 추가 |
| `api/v1/settlement/transactions.py` | `search`/`amount_min`/`amount_max`/복수 status 필터 / `hidden` 기본 제외 / hold·unhold·hide·unhide 4개 엔드포인트 |
| `schemas/settlement.py` | 신규 Request/Response 스키마 |
| DB migration | `TransactionStatus` enum에 2개 값 추가 (Alembic) |

### 프론트엔드

| 파일 | 변경 |
|---|---|
| `components/ui/AppDetailDrawer.tsx` | **신규** — 공통 Drawer 래퍼 (향후 전표/거래처에도 재사용) |
| `app/(main)/settlement/transactions/page.tsx` | 얇은 래퍼로 재설계 |
| `app/(main)/settlement/transactions/_components/*` | **신규** — 8개 컴포넌트 |
| `lib/api.ts` | `holdTransaction`/`unholdTransaction`/`hideTransaction`/`unhideTransaction` 추가 |
| 기존 재사용 | `TransactionCreateDialog`, `AllocationDialog`, `AppDataTable`, `AppPageHeader`, `AppPageToolbar`, `AppStatusChip` |
